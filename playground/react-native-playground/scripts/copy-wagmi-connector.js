const fs = require('fs');
const path = require('path');

const SOURCE_FILE = path.resolve(
  __dirname,
  '../../../integrations/wagmi/metamask-connector.ts',
);
const DEST_FILE = path.resolve(__dirname, '../src/wagmi/metamask-connector.ts');
const DEST_DIR = path.dirname(DEST_FILE);

// Ensure destination directory exists
if (!fs.existsSync(DEST_DIR)) {
  fs.mkdirSync(DEST_DIR, { recursive: true });
}

// Read the original file
const originalContent = fs.readFileSync(SOURCE_FILE, 'utf8');

// Add auto-generated header comment with eslint-disable and ts-nocheck
const autoGeneratedHeader = `/* eslint-disable -- AUTO-GENERATED FILE */
/**
 * AUTO-GENERATED FILE - DO NOT EDIT MANUALLY
 *
 * This file is automatically generated from:
 * integrations/wagmi/metamask-connector.ts
 *
 * Any changes made to this file will be overwritten during the build process.
 * To make changes, edit the original file in integrations/wagmi/metamask-connector.ts
 *
 * Why auto-generation?
 * - React Native/Expo restrictions prevent importing from outside src/ directory
 * - NPM package isolation: files outside package boundary aren't available when published
 * - Ensures consistency across all playgrounds using the wagmi connector
 *
 * See playground/react-native-playground/scripts/README.md for more details.
 */

// @ts-nocheck
`;

const newContent = autoGeneratedHeader + originalContent;

// Write to destination
fs.writeFileSync(DEST_FILE, newContent, 'utf8');

console.log(`âœ“ Copied wagmi connector from ${SOURCE_FILE} to ${DEST_FILE}`);
